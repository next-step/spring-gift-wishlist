<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>상품 등록</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet">
</head>
<body class="container mt-4">
<h2>상품 등록</h2>

<!-- 에러 메시지 표시 -->
<div th:if="${errorMessage}" class="alert alert-danger" role="alert">
  <i class="bi bi-exclamation-triangle-fill"></i>
  <span th:text="${errorMessage}"></span>
</div>

<form th:action="@{/admin/products/add}" method="post" th:object="${product}" class="mt-4">

  <!-- 상품명 필드 -->
  <div class="mb-3">
    <label for="name" class="form-label">상품명</label>
    <input type="text"
           class="form-control"
           th:class="${#fields.hasErrors('name')} ? 'form-control is-invalid' : 'form-control'"
           id="name"
           th:field="*{name}"
           required>
    <div th:if="${#fields.hasErrors('name')}" class="invalid-feedback">
      <span th:errors="*{name}"></span>
    </div>
  </div>

  <!-- 가격 필드 -->
  <div class="mb-3">
    <label for="price" class="form-label">가격</label>
    <input type="number"
           class="form-control"
           th:class="${#fields.hasErrors('price')} ? 'form-control is-invalid' : 'form-control'"
           id="price"
           th:field="*{price}"
           min="0"
           step="1"
           required>
    <div th:if="${#fields.hasErrors('price')}" class="invalid-feedback">
      <span th:errors="*{price}"></span>
    </div>
  </div>

  <!-- 설명 필드 -->
  <div class="mb-3">
    <label for="description" class="form-label">설명</label>
    <textarea class="form-control"
              th:class="${#fields.hasErrors('description')} ? 'form-control is-invalid' : 'form-control'"
              id="description"
              th:field="*{description}"
              rows="4"
              required></textarea>
    <div th:if="${#fields.hasErrors('description')}" class="invalid-feedback">
      <span th:errors="*{description}"></span>
    </div>
  </div>

  <!-- 이미지 URL 필드 -->
  <div class="mb-3">
    <label for="imageUrl" class="form-label">이미지 URL</label>
    <input type="url"
           class="form-control"
           th:class="${#fields.hasErrors('imageUrl')} ? 'form-control is-invalid' : 'form-control'"
           id="imageUrl"
           th:field="*{imageUrl}"
           required>
    <div th:if="${#fields.hasErrors('imageUrl')}" class="invalid-feedback">
      <span th:errors="*{imageUrl}"></span>
    </div>
  </div>

  <!-- 전체 에러 표시 -->
  <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger">
    <ul class="mb-0">
      <li th:each="error : ${#fields.globalErrors()}" th:text="${error}"></li>
    </ul>
  </div>

  <button type="submit" class="btn btn-success">저장</button>
  <a th:href="@{/admin/products}" class="btn btn-secondary ms-2">취소</a>
</form>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>