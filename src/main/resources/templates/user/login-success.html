<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>로그인 성공</title>
</head>
<body>
<h1>로그인에 성공했습니다</h1>


<button onclick="goToAdminPage()">관리자 페이지</button>

<script>
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

    function goToAdminPage() {
        const token = getCookie("token");

        fetch("/user/check-admin-header", {
            method: "GET",
            headers: {
                "Authorization": "Bearer " + token
            }
        })
            .then(res => {
                if (res.ok) {
                    window.location.href = "/admin/products";
                } else {
                    alert("관리자만 접근할 수 있습니다.");
                }
            });
    }

</script>

</body>
</html>
