<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>상품 목록</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet">
</head>

<body>
<!-- 에러 상황 -->
<div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>상품 목록</h1>
    <a th:href="@{/admin/products/new}" class="btn btn-primary">상품 등록</a>
  </div>

  <table class="table table-hover">
    <thead class="table-light">
    <tr>
      <th class="text-center">상품명</th>
      <th class="text-center">가격</th>
      <th class="text-center">이미지</th>
      <th class="text-center">-</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="product : ${products}">
      <td class="align-middle text-center" th:text="${product.name}"></td>
      <td class="align-middle text-center" th:text="${product.price}"></td>
      <td class="align-middle" th:text="${product.imageUrl}"></td>
      <td class="align-middle text-center">
        <div class="d-flex justify-content-center align-items-center gap-2">

          <a th:href="@{'/admin/products/' + ${product.id}}"
             class="btn btn-outline-secondary btn-sm">상세</a>

          <a th:href="@{'/admin/products/' + ${product.id} + '/edit'}"
             class="btn btn-outline-warning btn-sm">수정</a>

          <form th:action="@{'/admin/products/' + ${product.id}}" method="post"
                th:object="${product}" style="margin: 0;">
            <!-- DeleteMapping -->
            <input type="hidden" name="_method" value="delete"/>
            <button type="submit"
                    class="btn btn-outline-danger btn-sm"
                    onclick="return confirm('정말 삭제하시겠습니까?');">
              삭제
            </button>
          </form>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>
</body>
</html>
