<!DOCTYPE html>
<html th:replace="~{layout/layout :: layout('상품 목록', ~{::#content}, 'admin-page')}">
<div id="content">
  <div class="top-bar">
    <div class="user-info">
      <span th:text="${userEmail}">user@example.com</span>님, 환영합니다!
    </div>
    <a href="/admin/products/new" class="button">＋ 상품 등록</a>
    <a href="/members/products" class="button">일반 페이지</a>
    <a href="/members/logout" class="button">로그아웃</a>
  </div>

  <table>
    <thead>
    <tr>
      <th>상품명</th>
      <th>가격</th>
      <th>이미지</th>
      <th>관리</th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${products.empty}">
      <td colspan="4">등록된 상품이 없습니다.</td>
    </tr>
    <tr th:each="product : ${products}" class="clickable-row" th:data-id="${product.id}"
        th:data-link="@{/admin/products/{id}(id=${product.id})}">
      <td th:text="${product.name}">상품명</td>
      <td th:text="${product.price}">가격</td>
      <td><img th:src="${product.imageUrl}" alt="이미지 없음"/></td>
      <td>
        <a th:href="@{/admin/products/edit/{id}(id=${product.id})}" class="button">수정</a>
        <form th:action="@{/admin/products/{id}(id=${product.id})}" method="post"
              class="delete-form">
          <input type="hidden" name="_method" value="delete"/>
          <button type="submit">삭제</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <div class="pagination" th:if="${!products.empty}">
    <span th:if="${products.hasPrevious()}">
        <a th:href="@{/admin/products(page=${products.number - 1})}">&laquo; 이전</a>
    </span>
    <span>페이지 <b th:text="${products.number + 1}"></b> / <b
        th:text="${products.totalPages}"></b></span>
    <span th:if="${products.hasNext()}">
            <a th:href="@{/admin/products(page=${products.number + 1})}">다음 &raquo;</a>
        </span>
  </div>
</div>
</html>