- DB 테이블명은 snake_case 단수를 사용하는 것이 Best Practice인 것 같은데, H2 데이터베이스에서는 `user` 테이블이 예약어와 겹쳐 사용할 수 없음.
  - 일단 백틱으로 감싸두긴 했는데, 리포지토리 코드에서 SQL 쿼리를 작성할때도 전부 백틱이 들어가는게 너무 거슬림.
  - 근데 원래 SQL에서는 테이블명에 백틱을 사용할 수 있으니까, 일관성 있게 테이블명을 전부 백틱으로 감싸는 습관을 가져도 되나? 안티패턴인가?
- [x] 코딩 컨벤션을 지키기 위해 Line Wrap이 필요할 경우의 Best Practice?
  - 메서드의 경우, 파라미터를 전부 나누는게 보기 좋은 것 같다.
  - 다른 문장은 어떻게 나누는게 최선일까? void 함수를 실행하는 경우? 함수 리턴값을 변수에 담는 경우?
  - 뭔가 연산자 우선순위처럼 고려할 수 있는 옵션들의 우선순위가 있으면 좋을 것 같다.
  - -> Line Wrap 규칙이 있다. 
- 커밋 전에 포매터를 돌리고 있는데, 포매팅 규칙(코딩 컨벤션) 관련 궁금증
  - import 정렬해주는게 마음에 듦. java 표준 라이브러리, 외부 라이브러리, 사용자 정의 라이브러리 순으로 정렬됨.
  - 포매팅 규칙 XML 파일을 다운받아 사용중인데, `javax`가 `jakarta`로 변경된개 적용이 안 됐는지 `jakarta.*` 임포트를 사용자 정의 라이브러리쪽에 둠
  - 이걸 개인적으로 고치고 싶은데, jakarta는 java 표준 라이브러리라고 봐야 하나? 외부 라이브러리인가? 어디에 둬야 할까???
- `@Valid` 어노테이션을 통해 검증을 수행할 때, `jakarta.validation`에 있는 어노테이션만 사용하는게 나을까?
  - hibernate에서 제공하는 `@Length` 어노테이션은 `jakarta.validation.constraints`의 `@Size` 어노테이션과 기능이 거의 동일한 것 같음.
  - Length가 좀 더 semantic하긴 하지만, hibernate에 의존하도록 작성하는것보다 jakarta만 쓰는게 더 나을 것 같다는 생각이 문득 들었음.
- [x] BcryptPasswordEncoder 쓸 때, 별도의 해시 설정이 없었던 것 같은데 스프링 재시작하면 검증 로직에 문제가 생길 수 있는거 아닌가??
  - 같은 비밀번호를 인코딩하더라도 매번 다른 값이 나오는데, 이는 암호화를 수행할때마다 salt 값이 매번 달라지기 때문임!
  - `.matches()` 메서드로 검증 시에는 인코딩 결과에 이미 포함되어 있던 salt를 사용함. 즉, `입력된 비밀번호 + db에서 가져온 salt`를 해싱하여 비교!!
- [x] Java EE 소유권이 넘어가면서 `javax` 패키지명이 `jakarta`로 변경됐다 들었는데, `javax.crypto`는 왜 있지? 이거 `jakarta`로 바꿔야하나?
  - 모든게 바뀌는게 아님. `java.base`도 `javax.crypto`에 의존하고 있다!
- 현재 JWT 토큰에 UserId를 저장하고 있음. 토큰의 페이로드를 변조하더라도 시그니처가 달라서 어차피 인증이 통과하지 않을테니 지금 구현이 나쁘지 않다 생각함
  - 그런데 권한 처리는 어떻게 해 줘야 할까? 토큰에 role도 담는게 낫나?
  - 지금처럼 id만 토큰에 저장해두면 서비스 레이어에서 id를 바탕으로 유저를 가져오고, 그 유저의 권한을 확인해야 할 텐데 이렇게 되면 흐름이 너무 구리다...
- 어차피 RuntimeError 래퍼일 뿐인데 사용자 설정 예외를 너무 많이 쓰는거 아닌가 하는 생각이 듦.
  - 예외에 있어서 Best Practice는 뭘까? 멘토님은 어떤걸 선호하실까?
- `private static final RowMapper<User> rowmapper = () -> User.of(...)`
  - `@Repository` 어노테이션이 붙은, JdbcClient(Jdbc 래퍼)를 사용하는 클래스에 들어가는 필드임.
  - 근데 어차피 스프링 빈은 싱글톤으로 관리되니까 `static`이 없어도 똑같이 동작하는거 아닐까? qualifier를 `private final`로 통일해도 될까??
- 유저를 관리할 수 있는 관리자 페이지. 도대체 뭘 하려는걸까?
  - 유저 ID가 중복되는 경우를 수정? ID 부여와 관련된 동시성 문제는 DB가 책임지는거 아닌가?
  - 만약 ID 중복이 발생했다 하더라도, 관리자 페이지에서 직접 ID를 수정하도록 할 수 있나? 아예 삭제하는거면 모를까, 문제가 더 커질거같은데..
  - 비밀번호는 건드리지 않는게 맞는거같다. 비밀번호 수정 기능이 도입되어야 한다면, 관리자가 건드리는게 아니라 비밀번호 초기화 기능을 구현해보도록 하자.
  - 사실 지금 User 엔티티가 너무 간단해서 생기는 고민 같기는 하다. 이름 변경, 주소나 배송지 변경 등 관리자가 건드릴 부분이 충분히 있을 듯.
