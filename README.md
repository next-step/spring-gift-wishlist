# spring-gift-wishlist

## 상품 위시 리스트 - step 3: 위시리스트 구현

- 기존의 프로젝트에 상품 위시리스트를 추가했습니다.
- memberId, productId를 저장하는 위시리스트 테이블을 새로 만들었고, 위시리스트 CRUD API를 구현했습니다.
- 시간에 쫓겨 테스트 코드는 작성하지 못했습니다.. 리뷰해 주시기 전까지 금방 작성해서 push 해놓겠습니다..

### 1. 상품 위시리스트 테이블 추가

- id, member_id, product_id, quantity 필드를 가집니다.
- 각 유저 별로 어떤 product에 대해 몇 개의 상품을 담았는지를 저장하는 테이블입니다.

### 2. 상품 위시리스트 조회/추가/수정/삭제 구현

- 본인의 이메일과 패스워드로 로그인한 사용자가 본인의 위시리스트에 대해서 CRUD를 수행할 수 있도록 했습니다.
- 안전하게 HttpServletRequest에 저장된 memberId를 통해서 위시리스트 레코드를 조회합니다.
- 조회: 사용자는 본인이 담은 위시리스트를 List 형태로 조회할 수 있습니다
    - 각 본인의 id, email, 각 상품의 id, 이름, 가격, 총 가격을 조회할 수 있습니다.
- 생성 및 수정: 사용자는 WishListRequest 객체에 본인이 원하는 상품의 id와 수량을 입력해서 전달하면, 수량만큼 위시리스트 테이블에 반영합니다.
    - 수량을 음수를 받아올 수 있습니다. 위시리스트에 담은 수량이 해당 수량만큼 줄어듭니다.
    - 위시리스트에서의 특정 상품의 수량을 0으로 만들더라도 해당 상품에 대한 데이터는 삭제되지 않습니다. quantity가 0인 상태로 db에 남아있습니다.
- 삭제: 위시리스트 테이블에 저장된 특정 상품에 대한 위시리스트 정보를 삭제할 수 있습니다
    - WishListRequest에 productId를 담아서 서버에 전달하면 됩니다.

### 3. 상품 위시리스트 API 예외처리

- 기본적으로 로그인 시에 받은 토큰을 헤더에 전달해야 요청을 할 수 있습니다. 서버에서 HttpServletRequest에 저장된 memberId를 통해 위시리스트를 조회하고
  수정하기 때문에 다른 사용자의 위시리스트를 참조하거나 수정할 수는 없습니다.
- 하지만 요청한 productId가 존재하지 않는다면 404 NOT_FOUND와 함께 "객체가 존재하지 않습니다." 메세지를 전달받습니다.